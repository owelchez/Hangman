<!DOCTYPE html>
<html>
<head>
	<title>My Hangman Game</title>

										<!-- Libraries -->

<link rel="stylesheet" type="text/css" href="assets/CSS/reset.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="assets/CSS/style.css">
<link rel="stylesheet" type="text/css" href="assets/CSS/animate.css">

</head>
<body>
<div class="container">
			<div id="animateTitle">
				<img id="title" src="assets/images/title/welcome.png">
				<img id="title2" src="assets/images/title/to.png">		
				<img id="title2" src="assets/images/title/the.png">
				<img id="title" src="assets/images/title/hangman.png">
				<img id="title" src="assets/images/title/game.png">	
			</div>

			<br>
	<div id="ending">
			<div id="alphabetContainer">
				<!-- <button type="button" class="btn btn-default" class="buttonMargin" id="let"></button> -->
			</div>

			<div id="bloodyLetters"></div>

			<div id="winLoose">
				<table>
					<tr><div>Misses: <span id="Misses">0</span></div></tr>
					<tr><div>Letters Entered: <span id="lettersEntered"></span></div></tr>
				</table>
			</div>

			<div id="category">
				<h2>GUESS THE SECRET WORD</h2>
				<div><span id="word"></span></div>
			</div>

				<br>
	</div>

			<div id="footer">
				<button id="reset"><span>PLAY AGAIN!</span></button>
			</div>

				<audio autoplay>
				  <source src="assets/sounds/eerie.mp3" type="audio/mpeg">
				</audio>

</div>
</body>
</html>

<script src="https://code.jquery.com/jquery-3.1.0.slim.min.js"   integrity="sha256-cRpWjoSOw5KcyIOaZNo4i6fZ9tKPhYYb6i5T9RSVJG8=" crossorigin="anonymous"></script>

<script type="text/javascript">
$(document).ready(function() {

	var audioElement = document.createElement('audio');
				        audioElement.setAttribute('src', 'assets/sounds/darkLaugh.mp3');

	

	var currentWord = "";
	var userInput = "";
	var guesses = 0;
	var misses = 8;
	var letterButton = [];
	var dashes = [];
	var remainingLetters = 0;
	var spaces = 0;
	var didFindLetter = false;
	var escapePicture = 0;
	var endingPicture = 0;
	
					/*Create an array with the alphabet letters*/

	var alphabet = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "_"];

					/*Creates an array of random words*/

	var horror = [	"BLAIR WITCH PROJECT", 
					"RESIDENT EVIL", 
					"AMITYVILLE HORROR", 
					"STRANGERS", 
					"CLOWN STATUE", 
					"VANISHING HITCHHIKER",
					"HELLO KITTY MURDER"	];

	function startGame(){
		escapePicture = Math.floor(Math.random() * 5) + 1;
		endingPicture = Math.floor(Math.random() * 5) + 1;
		//currentWord = horror[Math.floor(Math.random() * (1 + horror.length - 1))];
		currentWord = "RESIDENT EVIL"; // Harcoded this for testing
		spaces = (currentWord.split(" ").length - 1);
		remainingLetters = (currentWord.length - spaces);
		
		console.log(currentWord);
		console.log('Misses ' + misses);
		console.log('Guesses ' + guesses);
		console.log('remainingLetters ' + remainingLetters);

		playAnimation();

		console.log('Ending Picture ' + endingPicture);
		console.log('Escape Picture ' + escapePicture);

	};

	function renderDashes(){
		for(index = 0; index < currentWord.length; index++){
			if(currentWord[index] === ' '){
				dashes.push(' ');
			} else if (currentWord[index]){
			dashes.push(' _ ');
			}
		}
		$('#word').append(dashes);
	};

	function renderButtons(slideInRight){
		for(index = 0; index < alphabet.length - 1; index++){
			letterButton = $('<button>', {
				class: "btn btn-default",
				class: "buttonMargin",
				value: alphabet[index],
				id: "boton"
			})

			letterButton.append(alphabet[index]);
		
			$("#alphabetContainer").append(letterButton);
		}
		slideInRight();
	};

	function slideInRight(callback){
		$('#animateTitle').addClass('animated slideInRight');
		callback();
	};

	function playAnimation(){
		renderButtons(function(){
			slideInRight(function(){
				renderDashes();
			})
		})
	};

	function runEnding(misses){
		if(misses < 1){
			$('#ending').empty();
			$('#ending').append('<img id="endingHanged" class="animated zoomIn" src="assets/images/animate/picture1.gif"/>');
			$('#ending').append('<img id="endingHanged" class="animated zoomIn" src="assets/images/animate/end' + endingPicture + '.gif"/>');
		}
	};

	function runEscape(remainingLetters){
		if(remainingLetters < 1){
			$('#ending').empty();
			$('#ending').append('<img id="escaped" class="animated zoomIn" src="assets/images/animate/escapedLetters.gif"/>');
			$('#ending').append('<img id="escaped" class="animated zoomIn" src="assets/images/animate/escaped' + escapePicture + '.gif"/>');
		}
	};

	startGame();

		$('#reset').on('click', function() {
			window.location.reload();
		});

		$(':button').on('click', function(callback){
			userInput = this.value;
			didFindLetter = false;
			console.log(userInput);
				for(i = 0; i < currentWord.length; i++){
					if(userInput === currentWord[i]){
						didFindLetter = true;
						dashes.splice(i, 0);
						dashes.splice(i, 1, userInput);
						$('#word').empty();
						$('#word').append(dashes);
						remainingLetters--;
						console.log('This is for remainingLetters ' + remainingLetters);
						guesses++;
						console.log('Right Guesses ' + guesses);
						console.log('Wrong Guesses ' + misses);
						
						} 
					} 
					
				if(!didFindLetter === true){
					misses--;
					$('#misses').empty().append(misses);
					console.log('Right Guesses ' + guesses);
					console.log('Wrong Guesses ' + misses);
				}
				this.disabled = true;
				runEnding(misses);
				runEscape(remainingLetters);
		});
		
})
</script>